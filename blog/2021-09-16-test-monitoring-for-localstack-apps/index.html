<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://localstack.cloud/css/vendor/custom.css><link rel=preload as=font href=https://localstack.cloud/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://localstack.cloud/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://localstack.cloud/main.a19d3c2adfc711fc3f6bc56811847d57b4c43e15f80370c7ace24cc11c9244a415edb5a4549a9159f9d46fa75c6809217d4652faf9db9bf78e3d9b93aaf08eb5.css integrity="sha512-oZ08Kt/HEfw/a8VoEYR9V7TEPhX4A3DHrOJMwRySRKQV7bWkVJqRWfnUb6dcaAkhfUZS+vnbm/eOPZuTqvCOtQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Test Monitoring for LocalStack Apps - LocalStack</title><meta name=description content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><link rel=canonical href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1.png"><meta name=twitter:title content="Test Monitoring for LocalStack Apps"><meta name=twitter:description content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><meta name=twitter:site content="@_localstack"><meta name=twitter:creator content="@_localstack"><meta property="og:title" content="Test Monitoring for LocalStack Apps"><meta property="og:description" content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><meta property="og:type" content="article"><meta property="og:url" content="/blog/2021-09-16-test-monitoring-for-localstack-apps/"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1.png"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2.png"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3.png"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4.png"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5.png"><meta property="og:image" content="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6.png"><meta property="article:published_time" content="2021-09-16T13:10:00+02:00"><meta property="article:modified_time" content="2021-09-16T13:10:00+02:00"><meta property="og:site_name" content="LocalStack"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"\/blog\/2021-09-16-test-monitoring-for-localstack-apps\/"},"headline":"Test Monitoring for LocalStack Apps","image":["/blog/2021-09-16-test-monitoring-for-localstack-apps/image1.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image2.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image3.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image4.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image5.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image6.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image7.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image8.png","/blog/2021-09-16-test-monitoring-for-localstack-apps/image9.png"],"datePublished":"2021-09-16T13:10:00CET","dateModified":"2021-09-16T13:10:00CET","author":{"@type":"Organization","name":"LocalStack"},"publisher":{"@type":"Organization","name":"LocalStack","logo":{"@type":"ImageObject","url":"\/\/images\/og-preview-image.png"}},"description":"Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/localstack.cloud\/"},{"@type":"ListItem","position":3,"name":"Blog","item":"https:\/\/localstack.cloud\/\/blog\/"},{"@type":"ListItem","position":4,"name":"2021 09 16 Test Monitoring for Localstack Apps","item":"https:\/\/localstack.cloud\/\/blog\/2021-09-16-test-monitoring-for-localstack-apps\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://localstack.cloud/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://localstack.cloud/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://localstack.cloud/favicon-16x16.png><link rel=mask-icon href=https://localstack.cloud/safari-pinned-tab.svg color=#6b7cf5><link rel=manifest href=https://localstack.cloud/site.webmanifest><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101988473-1','auto'),ga('send','pageview')</script></head><body class="blog single"><header class="navbar fixed-top navbar-expand-lg navbar-light pb-sm-0 bg-transparent" id=navbarGrad><div class="container pb-3"><div class="d-flex justify-content-lg-between w-100 flex-wrap flex-lg-nowrap"><label class="menu-icon order-0 d-lg-none" for=menu-btn><span class=navicon></span></label><input class="menu-btn order-0" type=checkbox id=menu-btn>
<a class="navbar-brand order-1 order-md-0" href=https://localstack.cloud/><img src=https://localstack.cloud/images/header-logo-new.svg height=43px alt=Logo style=margin-bottom:-10px></a><div class="flex-grow-1 order-2 d-lg-none"></div><ul class="navbar-nav social-nav order-3 order-lg-4"><li class=nav-item><a class=nav-link target=_blank href=https://twitter.com/_localstack><svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25 13.25c0 6.9036-5.5964 12.5-12.5 12.5C5.59644 25.75.0 20.1536.0 13.25.0 6.34644 5.59644.75 12.5.75 19.4036.75 25 6.34644 25 13.25zm-6.56-3.0468C19.0443 10.1315 19.6205 9.97084 20.1562 9.73331 19.7558 10.3325 19.2493 10.8586 18.6651 11.2797 18.6709 11.4076 18.6738 11.5366 18.6738 11.6661c0 3.9487-3.0055 8.5014-8.5012 8.5014C8.48534 20.1675 6.91443 19.6731 5.59285 18.825 5.82615 18.8528 6.06457 18.8669 6.30522 18.8669 7.70545 18.8669 8.9936 18.3894 10.0164 17.5879 8.70861 17.5636 7.6054 16.6997 7.22527 15.5129 7.40754 15.5477 7.59449 15.5662 7.78745 15.5662 8.05952 15.5662 8.32401 15.5299 8.57447 15.4612c-1.36658-.2743-2.39692-1.4817-2.39692-2.9294C6.17755 12.5193 6.17755 12.5066 6.17777 12.4939 6.58041 12.7183 7.04144 12.8526 7.53098 12.868 6.7297 12.3323 6.20183 11.4174 6.20183 10.3811c0-.547520000000001.14751-1.06113.40465-1.50232C8.08024 10.687 10.282 11.8764 12.7651 12.001 12.7139 11.7822 12.6874 11.5542 12.6874 11.32c0-1.64975 1.338-2.98781 2.9878-2.98781.8599.0 1.6364.36276 2.1815.94322C18.5369 9.14149 19.1767 8.89304 19.754 8.55056 19.5305 9.24867 19.057 9.83358 18.44 10.2032z" fill="#fff"/></svg><span class=visually-hidden>Twitter</span></a></li><li class=nav-item><a class=nav-link target=_blank href=https://github.com/localstack><svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.4984.75C5.59688.75.0 6.4882.0 13.5668c0 5.6616 3.58125 10.4647 8.55 12.161C9.175 25.8459 9.40312 25.4501 9.40312 25.1102 9.40312 24.8054 9.39219 23.9996 9.38594 22.9305 5.90938 23.7044 5.175 21.2119 5.175 21.2119c-.56719-1.4808-1.3875-1.875-1.3875-1.875C2.65156 18.5423 3.87187 18.5582 3.87187 18.5582 5.12656 18.6492 5.78594 19.8795 5.78594 19.8795c1.11562 1.9579 2.92656 1.393 3.63906 1.0643C9.5375 20.1156 9.86094 19.5507 10.2188 19.23 7.44375 18.9061 4.525 17.8066 4.525 12.8966c0-1.3994.4875-2.5436 1.2875-3.44036C5.68281 9.13231 5.25469 7.8286 5.93438 6.06534c0 0 1.05-.34468 3.43749 1.31327C10.3688 7.09457 11.4375 6.95256 12.5016 6.94777 13.5625 6.95415 14.6328 7.09457 15.6312 7.38021c2.386-1.65795 3.4344-1.31328 3.4344-1.31328.6813 1.76487.2531 3.06697.125 3.3909C19.9922 10.3546 20.475 11.4988 20.475 12.8982c0 4.9228-2.9219 6.0063-5.7063 6.3238C15.2172 19.6178 15.6172 20.3997 15.6172 21.5949 15.6172 23.3087 15.6016 24.6906 15.6016 25.1102 15.6016 25.4533 15.8266 25.8522 16.4609 25.7262 21.4219 24.0283 25 19.2268 25 13.5668 25 6.4882 19.4031.75 12.4984.75z" fill="#fff"/></svg><span class=visually-hidden>GitHub</span></a></li><li class="nav-item ms-2"><a class="btn btn-primary btn-tertiary" type=link href=https://app.localstack.cloud><i class="bi bi-person"></i> SIGN UP</a></li></ul><div class="collapse navbar-collapse order-4 order-lg-3 flex-grow-0"><ul class="navbar-nav main-nav me-auto gap-xl-4 d-flex flex-wrap flex-sm-nowrap"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=productsDropdown data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>SOLUTIONS</a><div class=dropdown-menu aria-labelledby=productsDropdown><a class=dropdown-item href=https://localstack.cloud/solutions/cloud-emulation>CLOUD EMULATION</a>
<a class=dropdown-item href=https://localstack.cloud/solutions/team-collaboration>TEAM COLLABORATION</a>
<a class=dropdown-item href=https://localstack.cloud/solutions/enterprise-integration>ENTERPRISE INTEGRATION</a>
<a class=dropdown-item href=https://localstack.cloud/solutions/ecosystem>ECOSYSTEM</a></div></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://localstack.cloud/pricing/>PRICING</a></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://docs.localstack.cloud>RESOURCES</a></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://localstack.cloud/blog/>BLOG</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=productsDropdown data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>COMMUNITY</a><div class=dropdown-menu aria-labelledby=productsDropdown><a class=dropdown-item href=https://localstack.cloud/community/stay-informed>STAY INFORMED</a>
<a class=dropdown-item href=https://localstack.cloud/community/get-involved>GET INVOLVED</a></div></li></ul><div class="break order-6 d-md-none"></div></div></div></div></header><script>var myNav=document.getElementById('navbarGrad');window.onscroll=function(){"use strict";window.scrollY>=100?(myNav.classList.add("navbar-visible"),myNav.classList.remove("bg-transparent")):(myNav.classList.add("bg-transparent"),myNav.classList.remove("navbar-visible"))}</script><section class="section section-sm bg-gradient-dark"><div class="position-absolute w-100 section pb-7 pt-9 pt-sm-7 d-none d-md-block"><div class=container><div class="row justify-content-center align-items-center"><div class=col-2><img class=w-100 style=transform:scale(2);opacity:.65 src=https://localstack.cloud/images/heroes/blog.svg></div><div class=col-2></div><div class=col-2></div><div class=col-2><img class=w-100 style=transform:rotate(35deg)scale(1.4);opacity:.9 src=https://localstack.cloud/images/heroes/blog.svg></div><div class=col-2><img class=w-100 style=transform:rotate(0)scale(1.5);opacity:.75 src=https://localstack.cloud/images/heroes/blog.svg></div></div></div></div><div class="container pb-7 pt-9 pt-sm-7"><div class="row justify-content-center align-items-center text-white"><h1 class="text-center m-0 pt-lg-5">Test Monitoring for LocalStack Apps</h1></div></div></section><section class="section section-sm mb-6"><div class="container px-lg-8"><div class="row justify-content-center"><div class=col-12><article><div class=blog-header><div class="d-flex align-items-center flex-wrap card-footer-text"><p class=mb-0><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2.5c5.5228.0 10 4.47715 10 10 0 5.5228-4.4772 10-10 10-5.52285.0-10-4.4772-10-10 0-5.52285 4.47715-10 10-10zm0 2c-4.41828.0-8 3.58172-8 8 0 4.4183 3.58172 8 8 8 4.4183.0 8-3.5817 8-8 0-4.41828-3.5817-8-8-8zm0 2c.5128.0.935499999999999.38604.9933.88338L13 7.5v4.5858l1.7071 1.7071C15.0976 14.1834 15.0976 14.8166 14.7071 15.2071 14.3466 15.5676 13.7794 15.5953 13.3871 15.2903L13.2929 15.2071l-2-2c-.1563-.1563-.2555-.359-.2842-.575700000000001L11 12.5v-5C11 6.94772 11.4477 6.5 12 6.5z" fill="#8d8b9f"/></svg>9&nbsp;MIN READ&nbsp;&#8212;&nbsp;
posted September 16, 2021 by <a class="stretched-link position-relative">Oguzhan Ozdemir, Solutions Engineer @ Thundra</a></p><p></div></div><p class=lead>Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight. (Guest blog post by Oguzhan Ozdemir, Solutions Engineer @ Thundra)</p><p>LocalStack gives developers the freedom to develop their cloud applications locally (even offline) - enabling a highly efficient dev&test loop. It also helps prevent scary cloud bills at the end of every month! LocalStack has an amazing community of users, contributors, and supporters - and generally demonstrates a very strong commitment to supporting open source.</p><p>The community uses LocalStack for many use cases such as developing microservice cloud applications. One of the strongest use cases why developers use LocalStack is “testing”. Since the local testing framework is provided, the need for setting up multiple testing environments on the cloud disappears and distributed microservice applications can easily be developed, tested, and deployed with green tests.</p><p>But, wait! Not everything will go so smoothly all the time. Oh, I wish we were in such a fairy tale where the horses were unicorns with wings, and tests passed in the first run.</p><p>It’s a fact that tests fail. All the time! Some erroneous tests make developers tear their hair out while trying to find the root cause in the log piles. And sometimes it is not a road blocker but it is definitely a fly in the ointment.</p><p>Today, it’s such a pain relief to use LocalStack while developing test environments. It saves us from setting up complex cloud environments with its easy-to-use mocked cloud services. On the other hand, there is still a need for debugging failed tests without getting lost within the logs of our complex architectures.</p><p>This is when Thundra comes to the rescue with Foresight for those who use LocalStack on their local development machine or in their Continuous Integration (CI) pipeline. Foresight helps developers understand the root causes of failing & long-running tests easily and quickly. It gives rich insights about the passed, failed, aborted tests of the test runs of the test suites.</p><h4 id=sample-application>Sample application</h4><p>Let’s talk about how we can get the best out of these two products. For this purpose, we’ve developed a small application. An application that’ll spawn multiple AWS services on your local machine with LocalStack and monitor your distributed architecture and its tests with Thundra Foresight.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_500x0_resize_box_2.png 500w" width=1999 height=1057><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image8.png width=1999 height=1057></noscript></figure></a><p>What we’ve planned here is somewhat simple. An AWS Lambda function, let’s call this Lambda #1, with an HTTP endpoint to take a request then writes to an SQS queue for further processing and then writes the same request into a DynamoDB database for bookkeeping purposes. Then, that SQS queue will pass the incoming message to our processor Lambda, our Lamda #2.</p><p>Once the processing is successful, Lambda #2 will notify an SNS topic, which triggers our archive Lambda, Lambda #3. When Lambda #3 is triggered, it’ll go back to the DynamoDB and update the request’s record, and set its state. It’ll also write the result of this whole request into a file and put it in an S3 bucket.</p><p>This might seem a lot, but all it does is pass the body of an HTTP request between different services and manipulate it along the way. This project is developed by Thundra’s Software Engineer <a href=https://twitter.com/tolgatakir>Tolga Takır</a> and the source code is available in <a href=https://github.com/thundra-io/thundra-demo-localstack-java>our GitHub repository</a>. In there, you’ll find the documentation on how to run this project on your machine.</p><p>After having all the requirements set up on our computer, we can simply run <code>make start</code> to spin up our application with LocalStack. This will take a couple of minutes, but once it’s completed, we’ll have our API running inside the LocalStack container.</p><p>At this point, we can run the following command to see if our API is up and running.</p><pre><code class=language-bash>$ awslocal apigateway get-rest-apis
{
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;&lt;YOUR_APIGATEWAY_ID&gt;&quot;,
            &quot;name&quot;: &quot;local-thundra-demo-localstack&quot;,
            &quot;createdDate&quot;: &quot;2021-09-06T13:54:57+03:00&quot;,
            &quot;version&quot;: &quot;V1&quot;,
            &quot;binaryMediaTypes&quot;: [],
            &quot;apiKeySource&quot;: &quot;HEADER&quot;,
            &quot;endpointConfiguration&quot;: {
                &quot;types&quot;: [
                    &quot;EDGE&quot;
                ]
            },
            &quot;tags&quot;: {},
            &quot;disableExecuteApiEndpoint&quot;: false
        }
    ]
}
</code></pre><p>If this result comes up empty, you might be looking in the wrong region.</p><p>We&rsquo;ve confirmed that our API is up and running. You can also send a GET request to Lambda&rsquo;s endpoint. This might take some time since it’s a cold start, but eventually, it should return an empty list.</p><pre><code class=language-bash>$ curl http://&lt;YOUR_APIGATEWAY_ID&gt;.execute-api.localhost.localstack.cloud:4566/local/requests

[]%
</code></pre><p>Let’s see what Thundra Foresight can do now. We can kill the current LocalStack container, we won’t be needing it for running the tests.</p><h4 id=how-to-integrate-foresight-into-localstack>How to integrate Foresight into LocalStack</h4><p>Thundra Java Agent comes built-in with LocalStack v0.12.16 and later. If you have the latest version of LocalStack, all you need to do is set <code>THUNDRA_APIKEY</code> as an environment variable and you are good to go with application monitoring. To enable Foresight as well, <code>THUNDRA_AGENT_TEST_PROJECT_ID</code> environment variable must be set.</p><p>You can get your API Key and Project ID at https://foresight.thundra.io.</p><p>For this project, you can set them in the <code>Makefile</code>. If that’s done, let’s run the tests with <code>make test</code>. After some time, if the demo gods are with us and we don’t have any problem, we should be able to see the results.</p><pre><code>[INFO]
[INFO] Results:
[INFO]
[ERROR] Failures:
[ERROR]   AppRequestLocalStackTest.testCreateNewRequest:30-&gt;LocalStackTest.assertEventually:90-&gt;lambda$testCreateNewRequest$0:38 [Extracted: requestId, status]
Expecting ArrayList:
  [(&quot;ae1bd554&quot;, &quot;PROCESSING&quot;), (&quot;ae1bd554&quot;, &quot;QUEUED&quot;)]
to contain:
  [(&quot;ae1bd554&quot;, &quot;QUEUED&quot;), (&quot;ae1bd554&quot;, &quot;PROCESSING&quot;), (&quot;ae1bd554&quot;, &quot;FINISHED&quot;)]
but could not find the following element(s):
  [(&quot;ae1bd554&quot;, &quot;FINISHED&quot;)]
[INFO]
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:00 min
[INFO] Finished at: 2021-09-06T21:21:01+03:00
[INFO] ------------------------------------------------------------------------
</code></pre><p>Looks like our test has failed. By looking at the logs, I can tell that we didn’t get the <code>FINISHED</code> state in our collection. Let’s check Foresight and then click to our test to see if we can see what went wrong.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_500x0_resize_box_2.png 500w" width=1469 height=966><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image3.png width=1469 height=966></noscript></figure></a><p>When you are on the test detail page, you can click the <code>Trace Map</code> button on the top right, it’ll open a window and will automatically redirect you to your invocations trace map. Here, we can see the whole flow, identical to what we’ve designed at the beginning of this post. We will also be able to tell where the error comes from.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_500x0_resize_box_2.png 500w" width=1000 height=1000><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image9.png width=1000 height=1000></noscript></figure></a><p>The red arrow that goes from our Lambda #3 to DynamoDB means there is a problem there. If we click on that, we’ll see a trace chart and summary of this request.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_500x0_resize_box_2.png 500w" width=1680 height=1604><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image1.png width=1680 height=1604></noscript></figure></a><p>Hmm&mldr; An <code>AmazonDynamoDBException</code> and a message that says everything fails. Let’s click on that up-arrow and see what’s the source of this.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_500x0_resize_box_2.png 500w" width=898 height=428><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image4.png width=898 height=428></noscript></figure></a><p>It looks like our <code>addRequest</code> method has failed when saving the item into our DynamoDB database. Let’s see our trace map again. If we click the JUnit 5 node on our map, we’ll see the whole trace chart for our test.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_500x0_resize_box_2.png 500w" width=1999 height=1010><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image2.png width=1999 height=1010></noscript></figure></a><p>On the right hand side of the screen, we see the original assertion error and it’s method marked as red on the trace chart. Let’s click to that second red row.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_500x0_resize_box_2.png 500w" width=1999 height=970><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image7.png width=1999 height=970></noscript></figure></a><p>This opened our debugging window again. Now, let’s zoom in on that and play the execution until the end.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_500x0_resize_box_2.png 500w" width=1054 height=634><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image5.png width=1054 height=634></noscript></figure></a><p>We can see that our <code>getResponse</code> list doesn’t have the <code>FINISHED</code> state as expected.</p><p>Now, we have some idea where our error originated and what variables were present at the time of the execution of our test. We call this <a href=https://foresight.docs.thundra.io/core-concepts/enabling-time-travel-debugging>Time Travel Debugging</a>. With this instrumentation method, Thundra Agent will give you the ability to save your traces and play them line by line to debug your application and your tests.</p><p>Now, let’s see how we can fix this. But, as you might have guessed, there isn’t any bug in the code and the error is made up.</p><p><em>Or is it?</em></p><h4 id=chaos-is-the-answer>Chaos is the Answer</h4><p>Well, usually developers write tests to ensure their application doesn’t break when they develop new features, fix bugs, or change anything in their codebase. Generally, this will give you a good estimate of how robust your application is. But not all errors come from our inability to write bug-free code.</p><p>Let’s face it. Some of the things we do feel like magic. There are a lot of things that can go wrong between your local environment and your production that we don’t understand at first sight. Even when you successfully push your code to production, things can still fail your efforts. A network partition, latency in the network where your code runs, or some disk failures&mldr; All of these could cost you a lot and this isn’t a perfect world. Some of these have already happened to you or might happen in the future. The best you can do is to be prepared for all of these as much as possible.</p><p>Purposefully injecting a bug, an exception, or latency might seem counterintuitive, but it’s better than the unexpected. This practice of doing a controlled experiment on your distributed system is called <a href=https://apm.docs.thundra.io/monitoring/chaos-engineering-with-thundra>Chaos Engineering</a>. At Thundra, we value the chaos, do our best to be prepared for the unexpected and we want our customers to be the same, if not more. By using Thundra Agent in your project, you’ll have the capability to engineer your own chaos experiment for your applications and your tests.</p><p>So, that’s what we did here. If you go to the following file, you’ll see that we’ve implemented a class for chaos injection and injected an error to our Lambda #3.</p><a href=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_500x0_resize_box_2.png 500w" width=916 height=211><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2021-09-16-test-monitoring-for-localstack-apps/image6.png width=916 height=211></noscript></figure></a><p>To fix the error, we can simply comment out these lines. Let’s run the tests again and see our tests become successful.</p><pre><code class=language-bash>[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 102.819 s - in io.thundra.demo.localstack.integration.AppRequestLocalStackTest
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:04 min
[INFO] Finished at: 2021-09-07T18:01:22+03:00
[INFO] ------------------------------------------------------------------------
</code></pre><p>In addition to application-level chaos engineering with Thundra, we can also inject errors at the infrastructure level with LocalStack - for example, injecting Kinesis stream errors by configuring <code>KINESIS_ERROR_PROBABILITY=0.8</code>. But let’s not go into too much detail here - we’ll cover that in a separate blog post!</p><h4 id=optimizations-and-thundra-lambda-server>Optimizations and Thundra Lambda Server</h4><p>When dealing with Lambdas, cold starts and feedback loops are always an issue whether you are on cloud or on your local. Thundra Agent comes with a lot of powerful utilities to minimize this tiresome cycle and helps you develop and debug your code faster and easier.</p><p>When you check the codes for this project, especially the <code>LocalStackTest.java</code> file, you’d see that we’re calling <code>make start-embedded</code> before each test. We’re simply forwarding all the Lambda invocations to the built-in Lambda server inside Thundra Agent. With this configuration, your cold starts and deployment time decreases substantially.</p><p>This will also affect the overall test time. A simple comparison is shown below.</p><pre><code class=language-bash>Test Execution Time (min) -------------
start                              2.53
start-embedded                     1.44
---------------------------------------
</code></pre><p>We hope to cover this feature in more detail in the future.</p><h4 id=summary-and-next-steps>Summary and Next Steps</h4><p>Summing up; LocalStack users can now have a granular view of their tests by plugging in Thundra Foresight with the demonstrated easy steps.</p><p>Foresight brings the power of observability that we have for production workloads into the tests for LocalStack users. If you want to learn more about how the integration works, you can check the documentation here.</p><p><strong>You can <a href="https://start.thundra.io/signup?utm_source=LocalStack&utm_medium=GuestBlog">signup for Thundra</a> and integrate your open source project for &ldquo;free forever and with full functionality&rdquo;</strong>.</p></article></div></div></div></section><section class="section bg-gradient-light"><div class=container><div class="row justify-content-center"><div class="d-flex flex-column gap-4 col-lg-12 text-white"><h2 class="h2 text-center">Stay in the loop</h2><p>We'd love to get in touch with you.
Please subscribe with your email to stay tuned for release notes and product updates.
We promise never to send an excessive amount of emails (we hate spam, too).</p><form class="center text-center validate" action=https://sendy.localstack.cloud/subscribe method=post accept-charset=utf-8><div class="input-group d-flex align-items-center gap-3"><input type=email class="form-control email" name=email id=email placeholder=email-address aria-label=email-address aria-describedby=basic-addon2></input>
<input type=hidden name=list value=bZ8926jt167PVq0OXTjaMgag>
<input type=hidden name=subform value=yes><div class=input-group-append><button class="btn btn-primary btn-tertiary form-button" type=submit name=submit>SUBSCRIBE</button></div></div></form></div></div></div></section><footer class="footer pt-6 bg-gradient-dark"><div class="footer-main pb-5"><div class=container><div class="row justify-content-between"><div class="col-12 col-lg-4"><img style=width:243px src=https://localstack.cloud/images/header-logo-new.svg alt="LocalStack Logo"></div><div class="col-12 col-lg-8 mt-4 mt-lg-0"><div class="row gap-4"><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://localstack.cloud/contact>Contact</a></li><li><a class=footer-text href=https://localstack.cloud/pricing>Pricing</a></li><li><a class=footer-text href=https://localstack.cloud/blog>Blog</a></li><li><a class=footer-text href=https://localstack.cloud/jobs>Jobs</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://app.localstack.cloud>App</a></li><li><a class=footer-text href=https://localstack.cloud/community>Community</a></li><li><a class=footer-text href=https://localstack.cloud/faq>FAQ</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://github.com/localstack>GitHub</a></li><li><a class=footer-text href=https://hub.docker.com/u/localstack>DockerHub</a></li><li><a class=footer-text href=https://docs.localstack.cloud>Docs</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li class=footer-text>Follow us</li><li class="d-flex gap-3"><a class=footer-text href=https://twitter.com/_localstack><span><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25 13.25c0 6.9036-5.5964 12.5-12.5 12.5C5.59644 25.75.0 20.1536.0 13.25.0 6.34644 5.59644.75 12.5.75 19.4036.75 25 6.34644 25 13.25zm-6.56-3.0468C19.0443 10.1315 19.6205 9.97084 20.1562 9.73331 19.7558 10.3325 19.2493 10.8586 18.6651 11.2797 18.6709 11.4076 18.6738 11.5366 18.6738 11.6661c0 3.9487-3.0055 8.5014-8.5012 8.5014C8.48534 20.1675 6.91443 19.6731 5.59285 18.825 5.82615 18.8528 6.06457 18.8669 6.30522 18.8669 7.70545 18.8669 8.9936 18.3894 10.0164 17.5879 8.70861 17.5636 7.6054 16.6997 7.22527 15.5129 7.40754 15.5477 7.59449 15.5662 7.78745 15.5662 8.05952 15.5662 8.32401 15.5299 8.57447 15.4612c-1.36658-.2743-2.39692-1.4817-2.39692-2.9294C6.17755 12.5193 6.17755 12.5066 6.17777 12.4939 6.58041 12.7183 7.04144 12.8526 7.53098 12.868 6.7297 12.3323 6.20183 11.4174 6.20183 10.3811c0-.547520000000001.14751-1.06113.40465-1.50232C8.08024 10.687 10.282 11.8764 12.7651 12.001 12.7139 11.7822 12.6874 11.5542 12.6874 11.32c0-1.64975 1.338-2.98781 2.9878-2.98781.8599.0 1.6364.36276 2.1815.94322C18.5369 9.14149 19.1767 8.89304 19.754 8.55056 19.5305 9.24867 19.057 9.83358 18.44 10.2032z" fill="#fff"/></svg></span></a><a class=footer-text href=https://www.linkedin.com/company/localstack-cloud><span><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 26c7.1797.0 13-5.8203 13-13S20.1797.0 13 0 0 5.8203.0 13 5.8203 26 13 26zM9.35126 10.5024C9.97963 10.5024 10.489 9.993 10.489 9.36463S9.97963 8.22687 9.35126 8.22687 8.2135 8.73626 8.2135 9.36463s.50939 1.13777 1.13776 1.13777zm2.21194.8622v6.3122h1.9599V14.5553C13.5231 13.7316 13.6781 12.9339 14.6993 12.9339c1.0073.0 1.0198.941700000000001 1.0198 1.6734v3.0701H17.68V14.2157C17.68 12.5153 17.3139 11.2086 15.3265 11.2086c-.9542.0-1.5938.5236-1.8554 1.0192H13.4446V11.3646H11.5632zm-3.19382.0H10.3324v6.3122H8.36938V11.3646z" fill="#fff"/></svg></span></a></li></ul></div></div></div></div></div></div><div class=footer-bottom><div class="container mb-2"><hr><div class="row pt-4"><div class=col style=color:#fff;opacity:.5>Copyright &copy; LocalStack</div><div class="col text-end"><ul class=list-inline><li class=list-inline-item><a class=footer-last-text href=https://localstack.cloud/privacy-policy>Privacy policy</a></li><li class=list-inline-item><a class=footer-last-text href=https://localstack.cloud/terms>Terms of Service</a></li><li class=list-inline-item><a class=footer-last-text href=https://localstack.cloud/#>Imprint</a></li></ul></div></div></div></div></footer><script src=https://localstack.cloud/js/bootstrap.min.51b4083a09e54138d5bbe9c42a5f5f71af6e60a417f276d5620cbde3b15eb1a07c9ea17a889bc58074adf9b19641039a77521d3131f039300d2fe29ffa532aa8.js integrity="sha512-UbQIOgnlQTjVu+nEKl9fca9uYKQX8nbVYgy947FesaB8nqF6iJvFgHSt+bGWQQOad1IdMTHwOTANL+Kf+lMqqA==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/js/highlight.min.8cdbefd08ec63ef25f4b2510ae50c13b3d9ed43e25a15ddb55f14c33130e68cf8be3131ccf2d087c49f5f21fe88c2f0e2715a21f936047d0d0b85dc48cb864b9.js integrity="sha512-jNvv0I7GPvJfSyUQrlDBOz2e1D4loV3bVfFMMxMOaM+L4xMczy0IfEn18h/ojC8OJxWiH5NgR9DQuF3EjLhkuQ==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/main.min.c667076fdc4df64bfcdde045586335c6f39e83b2890638c198f84cf7b06629acef2ef8536a38a1c5978689f003b2bd3918bc5b3400e1e62670dd1a558e29ccd9.js integrity="sha512-xmcHb9xN9kv83eBFWGM1xvOeg7KJBjjBmPhM97BmKazvLvhTajihxZeGifADsr05GLxbNADh5iZw3RpVjinM2Q==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/index.min.0a6a905e1726be034e7cc659908cb2de137453feff3d8df0900e3714d8c1e63708f0494c044872d7579637d10a418a5472f7dea41016b19d81eb216a4e59e1ae.js integrity="sha512-CmqQXhcmvgNOfMZZkIyy3hN0U/7/PY3wkA43FNjB5jcI8ElMBEhy11eWN9EKQYpUcvfepBAWsZ2B6yFqTlnhrg==" crossorigin=anonymous defer></script></body></html>